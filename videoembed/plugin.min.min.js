(function(){var f=500;var d=375;function e(a){a.windowManager.open({title:"Add Video",width:500,height:200,body:[{type:"textbox",name:"video_url",label:"Video URL"},{type:"textbox",name:"width",label:"Width",value:f.toString()},{type:"textbox",name:"height",label:"Height",value:d.toString()},],onsubmit:function(c){var b=c.data.video_url;var k=c.data.width;var l=c.data.height;if(b!=""&&(b.indexOf("vimeo.com")>=0||b.indexOf("youtube.com")>=0||b.indexOf("youtu.be")>=0)){if(b.indexOf("http://")!=0&&b.indexOf("https://")!=0){b="http://"+b}var m="";if(b.indexOf("vimeo.com")>=0){m='<iframe src="'+b+'" width="'+k+'" height="'+l+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'}else{if(b.indexOf("youtube.com")>=0||b.indexOf("youtu.be")>=0){m=b.replace(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?(.+)/g,'<iframe width="'+k+'" height="'+l+'" src="http://www.youtube.com/embed/$1" frameborder="0" allowfullscreen></iframe>')}}a.insertContent(m)}}})}tinymce.PluginManager.add("videoembed",function(a,b){a.addButton("videoembed",{text:"Add Video",icon:"media",onclick:function(){e(a)}});a.addMenuItem("videoembed",{text:"Add Video",context:"insert",icon:"media",onclick:function(){e(a)}})})})();